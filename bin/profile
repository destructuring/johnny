#!/bin/bash

tmp_aliases=$(mktemp -t XXXXXX)

for pth_config in config/*; do
	[[ -f $pth_config ]] || continue
	source $pth_config

	pth_vagrant=$(pwd)/vagrant/$vagrantname
	[[ -d $pth_vagrant ]] || continue

  nm_vagrant="${pth_config##*/}"
  cat >> $tmp_aliases << EOF
  function $nm_vagrant {
    pushd $(pwd) > /dev/null
    bin/vagrant $nm_vagrant ssh "\$@"
    popd > /dev/null
  }
EOF
done
unset pth_vagrant

source $tmp_aliases
rm -f $tmp_aliases

